# üöÄ –ú–∏–≥—Ä–∞—Ü–∏—è —Å MongoDB Atlas –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é MongoDB

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å MongoDB Atlas –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é MongoDB –Ω–∞ –≤–∞—à–µ–º –¥—Ä–æ–ø–ª–µ—Ç–µ.

## üì¶ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

### üîß –°–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- **`install-mongodb.sh`** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MongoDB 7.0 –Ω–∞ Ubuntu
- **`configure-mongodb-security.sh`** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **`setup-backup-cron.sh`** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### üì•üì§ –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:
- **`export-from-atlas.sh`** - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ MongoDB Atlas
- **`import-to-local.sh`** - –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–∫–∞–ª—å–Ω—É—é MongoDB

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- **`mongodb-monitor.sh`** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è MongoDB

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- **`QUICK_START.md`** - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- **`MONGODB_MIGRATION_GUIDE.md`** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ):
```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ Atlas URI –≤ —Å–∫—Ä–∏–ø—Ç–µ
nano export-from-atlas.sh

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
./export-from-atlas.sh
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –¥—Ä–æ–ø–ª–µ—Ç–µ:
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ –¥—Ä–æ–ø–ª–µ—Ç
scp *.sh *.tar.gz user@your-droplet-ip:~/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MongoDB
./install-mongodb.sh

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
./import-to-local.sh mongodb-backup-*.tar.gz

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
nano configure-mongodb-security.sh  # –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏!
./configure-mongodb-security.sh

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–±—ç–∫–∞–ø
nano setup-backup-cron.sh  # –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å!
./setup-backup-cron.sh
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```env
# –í .env —Ñ–∞–π–ª–∞—Ö –∑–∞–º–µ–Ω–∏—Ç–µ Atlas URI –Ω–∞:
MONGODB_URI=mongodb://rhythmcapsule_user:your_password@localhost:27017/rhythmcapsule
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
./mongodb-monitor.sh
```

## üîê –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏** –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π MongoDB
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** —Ç–æ–ª—å–∫–æ –∫ localhost (127.0.0.1)
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall** –Ω–∞ –¥—Ä–æ–ø–ª–µ—Ç–µ

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–í–∞—à –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MongoDB –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:
- **`backend/server`** - –æ—Å–Ω–æ–≤–Ω–æ–π API —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 5002)
- **`backend/telegram-server`** - Telegram –±–æ—Ç —Å–µ—Ä–≤–µ—Ä

–û–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `MONGODB_URI` –∏–∑ .env —Ñ–∞–π–ª–æ–≤.

## üîÑ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–±—ç–∫–∞–ø–∞:
- –ë—ç–∫–∞–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00
- –•—Ä–∞–Ω—è—Ç—Å—è 7 –¥–Ω–µ–π
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/home/backups/mongodb/`

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ï—Å–ª–∏ MongoDB –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
sudo journalctl -u mongod
sudo systemctl status mongod
```

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º:
```bash
sudo netstat -tlnp | grep :27017
mongosh --eval "db.adminCommand('ping')"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
```bash
mongosh --eval "use admin; db.getUsers()"
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `sudo tail -f /var/log/mongodb/mongod.log`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `./mongodb-monitor.sh`
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –ø–æ–¥—Ä–æ–±–Ω–æ–º—É —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É: `MONGODB_MIGRATION_GUIDE.md`

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ Atlas
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ MongoDB –Ω–∞ –¥—Ä–æ–ø–ª–µ—Ç–µ
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã .env —Ñ–∞–π–ª—ã
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–±—ç–∫–∞–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

---

**‚ö†Ô∏è –í–∞–∂–Ω–æ**: –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏! 